<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Wards</title>
</head>
<body onload="initalise()">
    <script>
        //Will be used to store the images of the beds. Called DOM elements. See https://www.w3schools.com/js/js_htmldom.asp for more information
        var bedImg;
        //Below I am generating some arrays to store information inside of. Here I have also defined the array structure.
        //[0] = First, [1] = Last, [2] = Gender [3] = Location [4] = Occupied
        var bed1Info = ["", "", "Unknown", "Unknown", "false"];
        var bed2Info = ["", "", "Unknown", "Unknown", "false"];
        var bed3Info = ["", "", "Unknown", "Unknown", "false"];
        var bed4Info = ["", "", "Unknown", "Unknown", "false"];
        var bed5Info = ["", "", "Unknown", "Unknown", "false"];
        var bed6Info = ["", "", "Unknown", "Unknown", "false"];
        var bed7Info = ["", "", "Unknown", "Unknown", "false"];
        var bed8Info = ["", "", "Unknown", "Unknown", "false"];
        var bedInfo = [bed1Info, bed2Info, bed3Info, bed4Info, bed5Info, bed6Info, bed7Info, bed8Info];
        var bedAlignment = ["L", "R", "L", "R", "L", "R", "L", "R"];

        //This function will be called when the page first loads 
        function initalise() 
        {
            //Here I am storing all of the img elements into an array to make them easier to access with numeric indexers.
            bedImg = [document.getElementById("bed1"),
            document.getElementById("bed2"),
            document.getElementById("bed3"),
            document.getElementById("bed4"),
            document.getElementById("bed5"),
            document.getElementById("bed6"),
            document.getElementById("bed7"),
            document.getElementById("bed8")];
            //Initalising the application with a selected bed.
            SelectedBed(1);
        }

        // This function will be called every time a change is made to a bed - Admit, Update, Discharge, Select
        function UpdateBedImagesAndButtons() 
        {
            //checking all the beds for their info to update the img source
            for (var i = 0; i < bedInfo.length; i++)
            {
                if (bedInfo[i][4] == "true")
                {
                    //if the bed is occupied
                    if (i == selectedBed)
                    {
                        // and it's selected
                        bedImg[i].src = "Bed" + bedAlignment[i] + bedInfo[i][2] + "Sel.gif";

                        //we want to be able to update a patients information OR discharge them so we'll activate those buttons to enable us to do so.
                        document.getElementById("btnAdmit").disabled = true;
                        document.getElementById("btnUpdate").disabled = false;
                        document.getElementById("btnDischarge").disabled = false;
                        document.getElementById("occupied").innerHTML = "<p style='color:red;'>This bed is occupied</p>";
                    }
                    else
                    {
                        //and it's not selected
                        bedImg[i].src = "Bed" + bedAlignment[i] + bedInfo[i][2] + ".gif";
                        //don't care about the buttons because we're not looking at this bed
                    }
                }
                else
                {
                    //if it's not occupied
                    if (i == selectedBed)
                    {
                        //And we've selected it
                        bedImg[i].src = "Bed" + bedAlignment[i] + "EmptySel.gif";

                        //we want to be able to admit a patient to the bed so we only want the admit button active
                        document.getElementById("btnAdmit").disabled = false;
                        document.getElementById("btnUpdate").disabled = true;
                        document.getElementById("btnDischarge").disabled = true;
                        document.getElementById("occupied").innerHTML = "<p style='color:blue;'>This bed is not occupied</p>";
                    }
                    else
                    {
                        //And it's not selected
                        bedImg[i].src = "Bed" + bedAlignment[i] + "Empty.gif";
                        //don't care about the buttons because we're not looking at this bed
                    }
                }
            }
        }

        //This function will be called every time an image is clicked on
        function SelectedBed(bedNo) 
        {
            //arrays index from 0 but we call from bed 1 to 8, so a - 1 is required to get the numbers to go from 0 to 7.
            selectedBed = bedNo - 1;
            //Updating the text fields with the information that is stored within the arrays.
            document.getElementById("txtFirst").value = bedInfo[selectedBed][0];
            document.getElementById("txtLast").value = bedInfo[selectedBed][1];
            document.getElementById("selGender").value = bedInfo[selectedBed][2];
            document.getElementById("selLocation").value = bedInfo[selectedBed][3];
            UpdateBedImagesAndButtons();
        }

        //This function will be called every time you click the admit button
        function btnAdmit_OnClick() 
        {
            //Updating the arrays with the information that has been entered into the text fields / drop downs.
            bedInfo[selectedBed][0] = document.getElementById("txtFirst").value;
            bedInfo[selectedBed][1] = document.getElementById("txtLast").value;
            bedInfo[selectedBed][2] = document.getElementById("selGender").value;
            bedInfo[selectedBed][3] = document.getElementById("selLocation").value;
            bedInfo[selectedBed][4] = "true";
            UpdateBedImagesAndButtons();
        }

        //This function will be called every time you click the update button
        function btnUpdate_OnClick()
        {
            //Updating the arrays with the information that has been entered into the text fields / drop downs.
            bedInfo[selectedBed][0] = document.getElementById("txtFirst").value;
            bedInfo[selectedBed][1] = document.getElementById("txtLast").value;
            bedInfo[selectedBed][2] = document.getElementById("selGender").value;
            bedInfo[selectedBed][3] = document.getElementById("selLocation").value;
            UpdateBedImagesAndButtons();
        }

        //This function will be called every time you click the discharge button
        function btnDischarge_OnClick()
        {
            //we just want to reset the value of everything in the array that we were storing into
            //and also remove anything that was entered into the text boxes / drop downs.
            bedInfo[selectedBed][0] = document.getElementById("txtFirst").value = "";
            bedInfo[selectedBed][1] = document.getElementById("txtLast").value = "";
            bedInfo[selectedBed][2] = document.getElementById("selGender").value = "Unknown";
            bedInfo[selectedBed][3] = document.getElementById("selLocation").value = "Unknown";
            bedInfo[selectedBed][4] = "false";
            UpdateBedImagesAndButtons();
        }
    </script>
    <!--Div container for the beds so that styling can be applied if needs be-->
    <div id="beds">
        <img id="bed1" onclick="SelectedBed(1)"/>
        <img id="bed2" onclick="SelectedBed(2)"/><br/>
        <img id="bed3" onclick="SelectedBed(3)"/>
        <img id="bed4" onclick="SelectedBed(4)"/><br />
        <img id="bed5" onclick="SelectedBed(5)"/>
        <img id="bed6" onclick="SelectedBed(6)"/><br />
        <img id="bed7" onclick="SelectedBed(7)"/>
        <img id="bed8" onclick="SelectedBed(8)"/><br />
    </div>
    <!--Div container for the data inputs so that styling can be applied if needs be-->
    <div id="dataInput">
        <input id="txtFirst" type="text" />
        <input id="txtLast" type="text" />
        <select id="selGender">
            <option value="Unknown">Unknown</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select>
        <select id="selLocation">
            <option value="Unknown">Unknown</option>
            <option value="Head">Head</option> 
            <option value="RightArm">Right Arm</option>
            <option value="LeftArm">Left Arm</option>
            <option value="Chest">Chest</option>
            <option value="Abdomen">Abdomen</option>
            <option value="RightLeg">Right Leg</option>
            <option value="LeftLeg">Left Leg</option>
        </select>
        <input id="btnAdmit" type="submit" value="Admit Patient" onclick="btnAdmit_OnClick()" />
        <input id="btnUpdate" type="submit" value="Update Patient" onclick="btnUpdate_OnClick()" />
        <input id="btnDischarge" type="submit" value="Discharge Patient" onclick="btnDischarge_OnClick()" />
    </div>
    <!--Output text to tell the user whether the bed is occupied or not-->
    <div id="occupied"></div> 
</body>
</html>