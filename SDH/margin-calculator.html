<html>
	<head>
		<title>SDH - Margin Calculator</title>
		<style>
			.lbl{
				font-family:arial;
				display:inline-block;
				position:relative;
				width:50px;
				text-align:right;
				margin-right:10px;	
			}
		</style>
		<script
 	 		src="http://code.jquery.com/jquery-3.2.1.min.js"
  			integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  			crossorigin="anonymous"></script>
		<script>
		var lastChanged = "input";
		function calculate() {
			var input = $("#input").val();
			var margin = $("#margin").val();
			var output = $("#output").val();
			if (lastChanged == "input") {
				console.log(input + " at " + margin +"% margin");
				console.log(input + " / " + (1 - (margin / 100)));
				$("#output").val((input / (1 - (margin / 100))).toFixed(2));
				console.log($("#output").val());
  			} else if (lastChanged == "output") {
				console.log(output + " at " + margin+"% margin inversed");
				console.log(output + " * " + (margin / 100));
				$("#input").val((output * (1 - (margin / 100))).toFixed(2));
				console.log($("#input").val());
			}
		}

		$(document).ready(function() {
			$('input').bind('input', function() {
				calculate();
				if ($(this).attr('id') != "margin") {
					lastChanged = $(this).attr('id');
				}
				console.log("last changed: " + lastChanged);
			});
		});
		</script>
	</head>
	<body>
		<span class="lbl">Input:</span><input id="input" type="number" value="0"/><br />
		<span class="lbl">Margin:</span><input id="margin" type="number" value="20" /><br />
		<span class="lbl">Output:</span><input id="output" type="number" value="0" /><br />
	</body>
</html>
